<!doctype html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>جاوااسکریپت و مرورگر :: Eloquent JavaScript</title>
  <link rel=stylesheet href="js/node_modules/codemirror/lib/codemirror.css">
  <script src="js/acorn_codemirror.js"></script>
  <link rel=stylesheet href="css/ejs.css">
  <script src="js/sandbox.js"></script>
  <script src="js/ejs.js"></script><script>var chapNum = 13;</script><script>var clicky_site_ids = clicky_site_ids || []; clicky_site_ids.push(101171577);</script>
  <script async src="//static.getclicky.com/js"></script>

</head>

<article>
<nav><a href="12_language.html" title="previous chapter">◀</a> <a href="index.html" title="cover">◆</a> <a href="14_dom.html" title="next chapter">▶</a></nav>

<h1><span class=chap_num>Chapter 13</span>جاوااسکریپت و مرورگر</h1>

<blockquote>

<p><a class="p_ident" id="p_QvqpbswJB1" href="#p_QvqpbswJB1" tabindex="-1" role="presentation"></a>The dream behind the Web is of a common information space in which we communicate by sharing information. Its universality is essential: the fact that a hypertext link can point to anything, be it personal, local or global, be it draft or highly polished.</p>

<footer>Tim Berners-Lee, <cite>The World Wide Web: A very short personal history</cite></footer>

</blockquote><figure class="chapter framed"><img src="img/chapter_picture_13.jpg" alt="Picture of a telephone switchboard"></figure>

<p><a class="p_ident" id="p_2jmj7l5rSw" href="#p_2jmj7l5rSw" tabindex="-1" role="presentation"></a>فصل‌های آینده‌ی این کتاب به مرورگرهای وب خواهد پرداخت. بدون مرورگرهای وب، جاوااسکریپتی هم￼ وجود نخواهد داشت. یا حتی اگر هم می بود، هیچ کسی توجهی به آن نمی‌کرد.</p>

<p>از همان ابتدا فناوری وب غیر متمرکز بوده است، نه فقط از لحاظ فنی بلکه روش رشد آن هم این گونه بوده است. ارائه‌دهندگان مختلف مرورگر، قابلیت‌های اختصاصی و موردی جدیدی را که گهگاه به روش‌های نسنجیده صورت گرفته است، اضافه کرده اند، که بعضا مورد استفاده دیگران قرار گرفته – و در نهایت به عنوان یک استاندارد در آمده است.</p>

<p>این اتفاق هم خوش یمن و هم مشکل ساز بوده است. از یک سو، این که یک فقط گروه مرکزی کنترل یک سیستم را نداشته باشند باعث رشد و ارتقای آن می شود اما بهبود سیستم توسط گروه‌های مختلف که همکاری خوبی باهم ندارند (یا گاهی اوقات به روشنی خصومت هم دارند) هم بدی‌های خودش را دارد. از سویی دیگر، نمی‌توان انتظار یک سیستم مستحکم را با روش بی حساب و کتابی که وب در آن توسعه یافت داشت. بعضی از قسمت‌های آن کاملا گیج‌کننده است و به‌خوبی درک نمی‌شوند.</p>

<h2><a class="h_ident" id="h_MXHAD+IO3d" href="#h_MXHAD+IO3d" tabindex="-1" role="presentation"></a>شبکه ها و اینترنت</h2>

<p><a class="p_ident" id="p_JllaLERxSx" href="#p_JllaLERxSx" tabindex="-1" role="presentation"></a>شبکه‌های کامپیوتری از دهه‌ی پنجاه میلادی (1950s) به وجود آمده اند. اگر دو یا چند کامپیوتر را با کابل به هم متصل کنید و اجازه بدهید که داده‌ها بین این کابل‌ها ارسال و دریافت شوند، می توانید کارهای شگفت‌انگیزی انجام دهید.</p>

<p><a class="p_ident" id="p_CbwyhoDNHG" href="#p_CbwyhoDNHG" tabindex="-1" role="presentation"></a>و اگر اتصال دو کامپیوتر در یک ساختمان به ما امکان انجام کارهای شگفتانگیز را می دهد، اتصال کامپیوترها در وسعت سیاره باید خیلی بهتر بشود. فناوری‌ای که برای شروع پیاده‌سازی این هدف توسعه داده شد در دهه‌ی هشتاد میلادی (1980) و شبکه‌ی نتیجه‌ی آن <em>اینترنت</em> نامیده‌ شد. این فناوری به به آنچه وعده داده بود رسیده است.</p>

<p>یک کامپیوتر می تواند از این شبکه برای انتقال بیت‌ها به یک کامپیوتر دیگر استفاده کند. برای اینکه این انتقال بیت‌ها باعث تعاملی موثر شود، باید کامپیوتر‌های دو سمت از معنای بیت‌هایی که منتقل می‌شوند آگاه باشند. معنای یک دنباله‌ از بیت‌ها به طور کلی به نوع و مکانیزم رمزگذاری چیزی بستگی دارد که این دنباله قرار است بیان کند.</p>

<p>یک <em>پروتکول شبکه</em> یک سبک تعامل در یک شبکه را توصیف می کند. پروتکول‌هایی برای ارسال ایمیل، دریافت ایمیل، به اشتراک گذاری فایل‌ها یا حتی برای کنترل کامپیوترهایی که ممکن است توسط نرم‌افزارهای مخرب آلوده شده باشند وجود دارد.</p>

<p><a class="p_ident" id="p_9Asn1ri5pP" href="#p_9Asn1ri5pP" tabindex="-1" role="presentation"></a>به عنوان مثال، <em>پروتکول انتقال ابرمتن</em> (HTTP)، برای بازیابی منابع مشخص (شامل اطلاعاتی مثل صفحات وب یا تصاویر) استفاده می‌شود. طبق این پروتکل، طرف ارسال‌کننده‌ی درخواست باید درخواستش را با یک خط مانند مثال زیر شروع کند، که شامل نام آن منبع مورد نظر و نسخه‌ای از پروتکل که قرار است استفاده شود می‌باشد:</p>

<pre class="snippet cm-s-default" data-language="text/plain" ><a class="c_ident" id="c_lC/Gwm2hWr" href="#c_lC/Gwm2hWr" tabindex="-1" role="presentation"></a>GET /index.html HTTP/1.1</pre>

<p>قوانین بسیار زیادی وجود دارد که درخواست‌دهنده می تواند برای مشخص نمودن جزئیات بیشتر در متن درخواست قرار دهد و نیز طرف دوم، که منبع خواسته شده را بر‌می‌گرداند، می تواند در محتوایش جای‌ دهد. در <a href="18_http.html">فصل 18</a> بیشتر به HTTP خواهیم پرداخت.</p>

<p>بیشتر پروتکل‌ها بر پایه‌ی دیگر پروتکل‌ها ساخته می شوند. HTTP با شبکه به عنوان وسیله‌ای جریان‌دار برخورد می‌کند که در آن می توانید بیت ها را قرار داده و با ترتیبی صحیح به مقصدی صحیح برسانید. همانطور که در <a href="11_async.html">فصل 11</a> دیدیم، کسب اطمینان از این صحت عملکرد، یکی از مسائل نسبتا مشکل است.</p>

<p><a class="p_ident" id="p_/rd8TSYhb5" href="#p_/rd8TSYhb5" tabindex="-1" role="presentation"></a><em>پروتکل کنترل مخابره</em> (TCP) ، پروتکلی است که این مشکل را برطرف می کند. تمامی وسایلی که از طریق اینترنت به هم متصل هستند به زبان TCP صحبت می کنند و بیشتر تعاملات روی اینترنت بر پایه‌ی آن ساخته شده است.</p>

<p><a class="p_ident" id="p_2zAnapW+Ev" href="#p_2zAnapW+Ev" tabindex="-1" role="presentation"></a>یک ارتباط TCP به این شکل عمل می کند: یک کامپیوتر باید منتظر بماند یا به گوش باشد (<em>listening</em>)، تا دیگر کامپیوترها شروع به صحبت با آن کنند. برای آنکه بتوان به انواع مختلف ارتباطات در آن واحد روی یک دستگاه واحد گوش کرد هر شنونده یک عدد دارد (که <em>پورت</em> نامیده می شود) که به آن اختصاص داده شده است. بیشتر پروتکل‌ها مشخص می کنند که کدام پورت به صورت پیشفرض باید استفاده شود. به عنوان مثال، زمانی که قصد داریم تا یک ایمیل را با استفاده از پروتکل SMTP ارسال کنیم ماشینی که از طریق آن ایمیل را ارسال می کنیم انتظار می رود که به پورت 25 گوش کند.</p>

<p><a class="p_ident" id="p_VR2AAfnlPM" href="#p_VR2AAfnlPM" tabindex="-1" role="presentation"></a>یک کامپیوتر دیگر می تواند با استفاده از شماره‌ی پورت صحیح، به ماشین هدفش ارتباط گرفته و یک اتصال برقرار نماید. اگر ماشین هدف در دسترس باشد و به آن پورت گوش دهد، این اتصال با موفقیت ایجاد می شود. کامپیوتر شنونده را سرویس دهنده (<em>server</em>) می نامند و کامپیوتری که به آن متصل می شود را یک سرویس گیرنده (<em>client</em>) می نامند.</p>

<p><a class="p_ident" id="p_9UT7MEyD4j" href="#p_9UT7MEyD4j" tabindex="-1" role="presentation"></a>این گونه ارتباطات مانند یک لوله‌ی دوطرفه عمل می کنند که بیت‌ها می توانند در آن جریان داشته باشند – ماشین‌هایی که در هر دو سمت قرار دارند می توانند داده‌ها را درون آن قرار دهند. به محض اینکه بیت‌ها با موفقیت منتقل شدند، می توان آن ها را توسط ماشینی که در دیگر سمت قرار داد دوباره خواند. این مدل مدلی مناسب است. می توانید فرض کنید که TCP یک تجرید از شبکه فراهم می کند.</p>

<h2 id="web"><a class="h_ident" id="h_5uDjZrPVWT" href="#h_5uDjZrPVWT" tabindex="-1" role="presentation"></a>وب</h2>

<p><a class="p_ident" id="p_/Hat2cXYP1" href="#p_/Hat2cXYP1" tabindex="-1" role="presentation"></a>وب جهان‌گستر یا <em>World Wide Web</em> (نباید با اینترنت معادل گرفته شود) مجموعه‌ای از پروتکل‌ها و فرمت‌ها است که به ما این امکان را می دهد تا صفحات وب را توسط یک مرورگر مشاهده کنیم. بخش &quot;وب&quot; آن اشاره به این حقیقت دارد که این گونه صفحات می توانند به آسانی با یکدیگر پیوند برقرار سازند و این ارتباطات شبکه‌ای بزرگ را می سازد که کاربران می توانند درون آن حرکت کنند.</p>

<p><a class="p_ident" id="p_E1s86NuovT" href="#p_E1s86NuovT" tabindex="-1" role="presentation"></a>برای اینکه بخشی از وب باشید، تمام چیزی که لازم دارید این است که یک ماشین را به اینترنت متصل نمایید و آن ماشین را تنظیم کنید که روی پورت 80 به پروتکل HTTP گوش کند، بنابراین دیگر کامپیوترها می توانند از این ماشین برای گرفتن اسناد درخواست دهند.</p>

<p><a class="p_ident" id="p_Di2bB3ekhc" href="#p_Di2bB3ekhc" tabindex="-1" role="presentation"></a>هر سند روی وب به وسیله‌ی یک نشانی وب (URL) نام گذاری می شود که چیزی شبیه این خواهد شد:</p>

<pre class="snippet cm-s-default" data-language="null" ><a class="c_ident" id="c_szDcTXPXE8" href="#c_szDcTXPXE8" tabindex="-1" role="presentation"></a>  http://eloquentjavascript.net/13_browser.html
 |      |                      |               |
 protocol       server               path</pre>

<p><a class="p_ident" id="p_f7rbhQCvEz" href="#p_f7rbhQCvEz" tabindex="-1" role="presentation"></a>قسمت اول نشان می دهد که این URL از پروتکل HTTP استفاده می کند (برخلاف مثلا HTTP رمزگذاری شده که به شکل <bdo>https://</bdo> نوشته می شود.). سپس بخشی می آید که سرویس‌دهنده‌ای که سند را از آن درخواست می کنیم در آن مشخص شده است. در آخر یک مسیر رشته‌ای که سند مورد نظر (یا منبع) را مشخص می کند.</p>

<p><a class="p_ident" id="p_Otsk2MtA94" href="#p_Otsk2MtA94" tabindex="-1" role="presentation"></a>Machines connected to the Internet get an <em>IP address</em>, which is a number that can be used to send messages to that machine, and looks something like <code>149.210.142.219</code> or <code>2001:4860:4860::8888</code>. But lists of more or less random numbers are hard to remember and awkward to type, so you can instead register a <em>domain name</em> for a specific address or set of addresses. I registered <em>eloquentjavascript.net</em> to point at the IP address of a machine I control and can thus use that domain name to serve web pages.</p>

<p><a class="p_ident" id="p_DEpzgqGWvq" href="#p_DEpzgqGWvq" tabindex="-1" role="presentation"></a>If you type this URL into your browser’s address bar, the browser will try to retrieve and display the document at that URL. First, your browser has to find out what address <em>eloquentjavascript.net</em> refers to. Then, using the HTTP protocol, it will make a connection to the server at that address and ask for the resource <em>/13_browser.html</em>. If all goes well, the server sends back a document, which your browser then displays on your screen.</p>

<h2><a class="h_ident" id="h_n3OM6EV/KR" href="#h_n3OM6EV/KR" tabindex="-1" role="presentation"></a>HTML</h2>

<p><a class="p_ident" id="p_m2H1Cp4ACJ" href="#p_m2H1Cp4ACJ" tabindex="-1" role="presentation"></a>HTML, which stands for <em>Hypertext Markup Language</em>, is the document format used for web pages. An HTML document contains text, as well as <em>tags</em> that give structure to the text, describing things such as links, paragraphs, and headings.</p>

<p><a class="p_ident" id="p_X9UXPRiLgl" href="#p_X9UXPRiLgl" tabindex="-1" role="presentation"></a>A short HTML document might look like this:</p>

<pre class="snippet cm-s-default" data-language="text/html" ><a class="c_ident" id="c_4GPwlAMrQs" href="#c_4GPwlAMrQs" tabindex="-1" role="presentation"></a><span class="cm-meta">&lt;!doctype html&gt;</span>
<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">html</span><span class="cm-tag cm-bracket">&gt;</span>
  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">head</span><span class="cm-tag cm-bracket">&gt;</span>
    <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">meta</span> <span class="cm-attribute">charset</span>=<span class="cm-string">&quot;utf-8&quot;</span><span class="cm-tag cm-bracket">&gt;</span>
    <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">title</span><span class="cm-tag cm-bracket">&gt;</span>My home page<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">title</span><span class="cm-tag cm-bracket">&gt;</span>
  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">head</span><span class="cm-tag cm-bracket">&gt;</span>
  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">body</span><span class="cm-tag cm-bracket">&gt;</span>
    <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">h1</span><span class="cm-tag cm-bracket">&gt;</span>My home page<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">h1</span><span class="cm-tag cm-bracket">&gt;</span>
    <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">p</span><span class="cm-tag cm-bracket">&gt;</span>Hello, I am Marijn and this is my home page.<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">p</span><span class="cm-tag cm-bracket">&gt;</span>
    <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">p</span><span class="cm-tag cm-bracket">&gt;</span>I also wrote a book! Read it
      <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">a</span> <span class="cm-attribute">href</span>=<span class="cm-string">&quot;http://eloquentjavascript.net&quot;</span><span class="cm-tag cm-bracket">&gt;</span>here<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">a</span><span class="cm-tag cm-bracket">&gt;</span>.<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">p</span><span class="cm-tag cm-bracket">&gt;</span>
  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">body</span><span class="cm-tag cm-bracket">&gt;</span>
<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">html</span><span class="cm-tag cm-bracket">&gt;</span></pre>

<p><a class="p_ident" id="p_zP6SuTzWSr" href="#p_zP6SuTzWSr" tabindex="-1" role="presentation"></a>The tags, wrapped in angle brackets (<code>&lt;</code> and <code>&gt;</code>, the symbols for <em>less than</em> and <em>greater than</em>), provide information about the structure of the document. The other text is just plain text.</p>

<p><a class="p_ident" id="p_7PI7BADgG4" href="#p_7PI7BADgG4" tabindex="-1" role="presentation"></a>The document starts with <code>&lt;!doctype html&gt;</code>, which tells the browser to interpret the page as <em>modern</em> HTML, as opposed to various dialects that were in use in the past.</p>

<p><a class="p_ident" id="p_TMtmUAUMPQ" href="#p_TMtmUAUMPQ" tabindex="-1" role="presentation"></a>HTML documents have a head and a body. The head contains information <em>about</em> the document, and the body contains the document itself. In this case, the head declares that the title of this document is “My home page” and that it uses the UTF-8 encoding, which is a way to encode Unicode text as binary data. The document’s body contains a heading (<code>&lt;h1&gt;</code>, meaning “heading 1”—<code>&lt;h2&gt;</code> to <code>&lt;h6&gt;</code> produce subheadings) and two paragraphs (<code>&lt;p&gt;</code>).</p>

<p><a class="p_ident" id="p_twHeUPgGnQ" href="#p_twHeUPgGnQ" tabindex="-1" role="presentation"></a>Tags come in several forms. An element, such as the body, a paragraph, or a link, is started by an <em>opening tag</em> like <code>&lt;p&gt;</code> and ended by a <em>closing tag</em> like <code>&lt;/p&gt;</code>. Some opening tags, such as the one for the link (<code>&lt;a&gt;</code>), contain extra information in the form of <code>name=&quot;value&quot;</code> pairs. These are called <em>attributes</em>. In this case, the destination of the link is indicated with <code>href=&quot;http://<wbr>eloquentjavascript.<wbr>net&quot;</code>, where <code>href</code> stands for “hypertext reference”.</p>

<p><a class="p_ident" id="p_oLeQsmpoFC" href="#p_oLeQsmpoFC" tabindex="-1" role="presentation"></a>Some kinds of tags do not enclose anything and thus do not need to be closed. The metadata tag <code>&lt;meta charset=&quot;utf-8&quot;&gt;</code> is an example of this.</p>

<p><a class="p_ident" id="p_aDzWCv6pnm" href="#p_aDzWCv6pnm" tabindex="-1" role="presentation"></a>To be able to include angle brackets in the text of a document, even though they have a special meaning in HTML, yet another form of special notation has to be introduced. A plain opening angle bracket is written as <code>&amp;lt;</code> (“less than”), and a closing bracket is written as <code>&amp;gt;</code> (“greater than”). In HTML, an ampersand (<code>&amp;</code>) character followed by a name or character code and a semicolon (<code>;</code>) is called an <em>entity</em> and will be replaced by the character it encodes.</p>

<p><a class="p_ident" id="p_BVTrBS/gKt" href="#p_BVTrBS/gKt" tabindex="-1" role="presentation"></a>This is analogous to the way backslashes are used in JavaScript strings. Since this mechanism gives ampersand characters a special meaning, too, they need to be escaped as <code>&amp;amp;</code>. Inside attribute values, which are wrapped in double quotes, <code>&amp;quot;</code> can be used to insert an actual quote character.</p>

<p><a class="p_ident" id="p_RK6LQEinS9" href="#p_RK6LQEinS9" tabindex="-1" role="presentation"></a>HTML is parsed in a remarkably error-tolerant way. When tags that should be there are missing, the browser reconstructs them. The way in which this is done has been standardized, and you can rely on all modern browsers to do it in the same way.</p>

<p><a class="p_ident" id="p_hnbBzl0NyQ" href="#p_hnbBzl0NyQ" tabindex="-1" role="presentation"></a>The following document will be treated just like the one shown previously:</p>

<pre class="snippet cm-s-default" data-language="text/html" ><a class="c_ident" id="c_uW331sfiez" href="#c_uW331sfiez" tabindex="-1" role="presentation"></a><span class="cm-meta">&lt;!doctype html&gt;</span>

<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">meta</span> <span class="cm-attribute">charset</span>=<span class="cm-string">utf-8</span><span class="cm-tag cm-bracket">&gt;</span>
<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">title</span><span class="cm-tag cm-bracket">&gt;</span>My home page<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">title</span><span class="cm-tag cm-bracket">&gt;</span>

<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">h1</span><span class="cm-tag cm-bracket">&gt;</span>My home page<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">h1</span><span class="cm-tag cm-bracket">&gt;</span>
<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">p</span><span class="cm-tag cm-bracket">&gt;</span>Hello, I am Marijn and this is my home page.
<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">p</span><span class="cm-tag cm-bracket">&gt;</span>I also wrote a book! Read it
  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">a</span> <span class="cm-attribute">href</span>=<span class="cm-string">http://eloquentjavascript.net</span><span class="cm-tag cm-bracket">&gt;</span>here<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">a</span><span class="cm-tag cm-bracket">&gt;</span>.</pre>

<p><a class="p_ident" id="p_0ji/iAsoGd" href="#p_0ji/iAsoGd" tabindex="-1" role="presentation"></a>The <code>&lt;html&gt;</code>, <code>&lt;head&gt;</code>, and <code>&lt;body&gt;</code> tags are gone completely. The browser knows that <code>&lt;meta&gt;</code> and <code>&lt;title&gt;</code> belong in the head and that <code>&lt;h1&gt;</code> means the body has started. Furthermore, I am no longer explicitly closing the paragraphs since opening a new paragraph or ending the document will close them implicitly. The quotes around the attribute values are also gone.</p>

<p><a class="p_ident" id="p_849RpAZtxv" href="#p_849RpAZtxv" tabindex="-1" role="presentation"></a>This book will usually omit the <code>&lt;html&gt;</code>, <code>&lt;head&gt;</code>, and <code>&lt;body&gt;</code> tags from examples to keep them short and free of clutter. But I <em>will</em> close tags and include quotes around attributes.</p>

<p><a class="p_ident" id="p_xJbQ1KdKG6" href="#p_xJbQ1KdKG6" tabindex="-1" role="presentation"></a>I will also usually omit the doctype and <code>charset</code> declaration. This is not to be taken as an encouragement to drop these from HTML documents. Browsers will often do ridiculous things when you forget them. You should consider the doctype and the <code>charset</code> metadata to be implicitly present in examples, even when they are not actually shown in the text.</p>

<h2 id="script_tag"><a class="h_ident" id="h_x9VDt2sTZZ" href="#h_x9VDt2sTZZ" tabindex="-1" role="presentation"></a>HTML and JavaScript</h2>

<p><a class="p_ident" id="p_yGq/gOJF3i" href="#p_yGq/gOJF3i" tabindex="-1" role="presentation"></a>In the context of this book, the most important HTML tag is <code>&lt;script&gt;</code>. This tag allows us to include a piece of JavaScript in a document.</p>

<pre class="snippet cm-s-default" data-language="text/html" ><a class="c_ident" id="c_r/8m2Qh59j" href="#c_r/8m2Qh59j" tabindex="-1" role="presentation"></a><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">h1</span><span class="cm-tag cm-bracket">&gt;</span>Testing alert<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">h1</span><span class="cm-tag cm-bracket">&gt;</span>
<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">script</span><span class="cm-tag cm-bracket">&gt;</span><span class="cm-variable">alert</span>(<span class="cm-string">&quot;hello!&quot;</span>);<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">script</span><span class="cm-tag cm-bracket">&gt;</span></pre>

<p><a class="p_ident" id="p_sQGLHtZgi0" href="#p_sQGLHtZgi0" tabindex="-1" role="presentation"></a>Such a script will run as soon as its <code>&lt;script&gt;</code> tag is encountered while the browser reads the HTML. This page will pop up a dialog when opened—the <code>alert</code> function resembles <code>prompt</code>, in that it pops up a little window, but only shows a message without asking for input.</p>

<p><a class="p_ident" id="p_GmDPwY/KfO" href="#p_GmDPwY/KfO" tabindex="-1" role="presentation"></a>Including large programs directly in HTML documents is often impractical. The <code>&lt;script&gt;</code> tag can be given an <code>src</code> attribute  to fetch a script file (a text file containing a JavaScript program) from a URL.</p>

<pre class="snippet cm-s-default" data-language="text/html" ><a class="c_ident" id="c_UGuRtQ4i0u" href="#c_UGuRtQ4i0u" tabindex="-1" role="presentation"></a><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">h1</span><span class="cm-tag cm-bracket">&gt;</span>Testing alert<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">h1</span><span class="cm-tag cm-bracket">&gt;</span>
<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">script</span> <span class="cm-attribute">src</span>=<span class="cm-string">&quot;code/hello.js&quot;</span><span class="cm-tag cm-bracket">&gt;</span><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">script</span><span class="cm-tag cm-bracket">&gt;</span></pre>

<p><a class="p_ident" id="p_Hz/JcRYmOp" href="#p_Hz/JcRYmOp" tabindex="-1" role="presentation"></a>The <em>code/hello.js</em> file included here contains the same program—<code>alert(&quot;hello!&quot;)</code>. When an HTML page references other URLs as part of itself—for example, an image file or a script—web browsers will retrieve them immediately and include them in the page.</p>

<p><a class="p_ident" id="p_DLaR5M/yDv" href="#p_DLaR5M/yDv" tabindex="-1" role="presentation"></a>A script tag must always be closed with <code>&lt;/script&gt;</code>, even if it refers to a script file and doesn’t contain any code. If you forget this, the rest of the page will be interpreted as part of the script.</p>

<p><a class="p_ident" id="p_G01s8wj6pP" href="#p_G01s8wj6pP" tabindex="-1" role="presentation"></a>You can load ES modules (see <a href="10_modules.html#es">Chapter 10</a>) in the browser by giving your script tag a <code>type=&quot;module&quot;</code> attribute. Such modules can depend on other modules by using URLs relative to themselves as module names in <code>import</code> declarations.</p>

<p><a class="p_ident" id="p_DDA5xIdUC1" href="#p_DDA5xIdUC1" tabindex="-1" role="presentation"></a>Some attributes can also contain a JavaScript program. The <code>&lt;button&gt;</code> tag shown next (which shows up as a button) has an <code>onclick</code> attribute. The attribute’s value will be run whenever the button is clicked.</p>

<pre class="snippet cm-s-default" data-language="text/html" ><a class="c_ident" id="c_2a6WfPL3P2" href="#c_2a6WfPL3P2" tabindex="-1" role="presentation"></a><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">button</span> <span class="cm-attribute">onclick</span>=<span class="cm-string">&quot;alert('Boom!');&quot;</span><span class="cm-tag cm-bracket">&gt;</span>DO NOT PRESS<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">button</span><span class="cm-tag cm-bracket">&gt;</span></pre>

<p><a class="p_ident" id="p_ua9bcAZLko" href="#p_ua9bcAZLko" tabindex="-1" role="presentation"></a>Note that I had to use single quotes for the string in the <code>onclick</code> attribute because double quotes are already used to quote the whole attribute. I could also have used <code>&amp;quot;</code>.</p>

<h2><a class="h_ident" id="h_xSthu5StoL" href="#h_xSthu5StoL" tabindex="-1" role="presentation"></a>In the sandbox</h2>

<p><a class="p_ident" id="p_AniKiqdG2y" href="#p_AniKiqdG2y" tabindex="-1" role="presentation"></a>Running programs downloaded from the Internet is potentially dangerous. You do not know much about the people behind most sites you visit, and they do not necessarily mean well. Running programs by people who do not mean well is how you get your computer infected by viruses, your data stolen, and your accounts hacked.</p>

<p><a class="p_ident" id="p_D7H4XfnmGB" href="#p_D7H4XfnmGB" tabindex="-1" role="presentation"></a>Yet the attraction of the Web is that you can browse it without necessarily trusting all the pages you visit. This is why browsers severely limit the things a JavaScript program may do: it can’t look at the files on your computer or modify anything not related to the web page it was embedded in.</p>

<p><a class="p_ident" id="p_46UloKEL0E" href="#p_46UloKEL0E" tabindex="-1" role="presentation"></a>Isolating a programming environment in this way is called <em>sandboxing</em>, the idea being that the program is harmlessly playing in a sandbox. But you should imagine this particular kind of sandbox as having a cage of thick steel bars over it so that the programs playing in it can’t actually get out.</p>

<p><a class="p_ident" id="p_7pNt468QvZ" href="#p_7pNt468QvZ" tabindex="-1" role="presentation"></a>The hard part of sandboxing is allowing the programs enough room to be useful yet at the same time restricting them from doing anything dangerous. Lots of useful functionality, such as communicating with other servers or reading the content of the copy-paste clipboard, can also be used to do problematic, privacy-invading things.</p>

<p><a class="p_ident" id="p_vavJ6h7++M" href="#p_vavJ6h7++M" tabindex="-1" role="presentation"></a>Every now and then, someone comes up with a new way to circumvent the limitations of a browser and do something harmful, ranging from leaking minor private information to taking over the whole machine that the browser runs on. The browser developers respond by fixing the hole, and all is well again—until the next problem is discovered, and hopefully publicized, rather than secretly exploited by some government agency or mafia.</p>

<h2><a class="h_ident" id="h_p42hxqLkOm" href="#h_p42hxqLkOm" tabindex="-1" role="presentation"></a>Compatibility and the browser wars</h2>

<p><a class="p_ident" id="p_EZKXamx/Cn" href="#p_EZKXamx/Cn" tabindex="-1" role="presentation"></a>In the early stages of the Web, a browser called Mosaic dominated the market. After a few years, the balance shifted to Netscape, which was then, in turn, largely supplanted by Microsoft’s Internet Explorer. At any point where a single browser was dominant, that browser’s vendor would feel entitled to unilaterally invent new features for the Web. Since most users used the most popular browser, websites would simply start using those features—never mind the other browsers.</p>

<p><a class="p_ident" id="p_78bXJk2Qn6" href="#p_78bXJk2Qn6" tabindex="-1" role="presentation"></a>This was the dark age of compatibility, often called the <em>browser wars</em>. Web developers were left with not one unified Web but two or three incompatible platforms. To make things worse, the browsers in use around 2003 were all full of bugs, and of course the bugs were different for each browser. Life was hard for people writing web pages.</p>

<p><a class="p_ident" id="p_K5Wu7RrwZS" href="#p_K5Wu7RrwZS" tabindex="-1" role="presentation"></a>Mozilla Firefox, a not-for-profit offshoot of Netscape, challenged Internet Explorer’s position in the late 2000s. Because Microsoft was not particularly interested in staying competitive at the time, Firefox took a lot of market share away from it. Around the same time, Google introduced its Chrome browser, and Apple’s Safari browser gained popularity, leading to a situation where there were four major players, rather than one.</p>

<p><a class="p_ident" id="p_ztjPRIOS1D" href="#p_ztjPRIOS1D" tabindex="-1" role="presentation"></a>The new players had a more serious attitude toward standards and better engineering practices, giving us less incompatibility and fewer bugs. Microsoft, seeing its market share crumble, came around and adopted these attitudes in its Edge browser, which replaces Internet Explorer. If you are starting to learn web development today, consider yourself lucky. The latest versions of the major browsers behave quite uniformly and have relatively few bugs.</p><nav><a href="12_language.html" title="previous chapter">◀</a> <a href="index.html" title="cover">◆</a> <a href="14_dom.html" title="next chapter">▶</a></nav>
</article>
