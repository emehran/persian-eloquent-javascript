<!doctype html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>جاوااسکریپت و مرورگر :: Eloquent JavaScript</title>
  <link rel=stylesheet href="js/node_modules/codemirror/lib/codemirror.css">
  <script src="js/acorn_codemirror.js"></script>
  <link rel=stylesheet href="css/ejs.css">
  <script src="js/sandbox.js"></script>
  <script src="js/ejs.js"></script><script>var chapNum = 13;</script><script>var clicky_site_ids = clicky_site_ids || []; clicky_site_ids.push(101171577);</script>
  <script async src="//static.getclicky.com/js"></script>

</head>

<article>
<nav><a href="12_language.html" title="previous chapter">◀</a> <a href="index.html" title="cover">◆</a> <a href="14_dom.html" title="next chapter">▶</a></nav>

<h1><span class=chap_num>فصل 13</span>جاوااسکریپت و مرورگر</h1>

<blockquote>

<p><a class="p_ident" id="p_FBIn4bdVQo" href="#p_FBIn4bdVQo" tabindex="-1" role="presentation"></a>رویای پشت وب، وجود یک فضای مشترک اطلاعاتی است که در آن، ما با اشتراک گذاری اطلاعات با هم ارتباط برقرار می‌کنیم. عمومیت و فراگیری آن یک اصل است: اینکه در واقع می‌توان با یک پیوند ابرمتن (hypertext link) به هر چیزی اشاره کرد، چه اطلاعات شخصی، محلی یا جهانی، پیش‌نویس یا اطلاعاتی که ویرایش‌ شده باشد.</p>

<footer>Tim Berners-Lee, <cite>The World Wide Web: A very short personal history</cite></footer>

</blockquote><figure class="chapter framed"><img src="img/chapter_picture_13.jpg" alt="Picture of a telephone switchboard"></figure>

<p><a class="p_ident" id="p_2jmj7l5rSw" href="#p_2jmj7l5rSw" tabindex="-1" role="presentation"></a>فصل‌های آینده‌ی این کتاب به مرورگرهای وب خواهند پرداخت. بدون مرورگرهای وب، جاوااسکریپتی هم وجود نخواهد داشت. یا حتی اگر هم می‌بود، هیچ کسی توجهی به آن نمی‌کرد.</p>

<p>از همان ابتدا فناوری وب غیر متمرکز بوده است، نه فقط از لحاظ فنی بلکه روش رشد آن هم نیز این گونه بوده است. ارائه‌دهندگان مختلف مرورگر، قابلیت‌های اختصاصی و موردی جدیدی را که گهگاه به روش‌های نسنجیده صورت گرفته گرفته‌اند، اضافه کرده‌اند، که بعضا مورد استفاده دیگران قرار گرفته – و در نهایت به عنوان یک استاندارد در آمده است.</p>

<p>این اتفاق هم خوش یمن و هم مشکل ساز بوده است. از یک سو، این که فقط یک گروه مرکزی، سیستم را کنترل نکند، باعث رشد و ارتقای آن می‌شود؛ اما بهبود سیستم توسط گروه‌های مختلف که همکاری خوبی باهم ندارند (یا گاهی اوقات به روشنی خصومت هم دارند) هم بدی‌های خودش را دارد. از سویی دیگر، نمی‌توان انتظار یک سیستم مستحکم را با روش بی حساب و کتابی که وب در آن توسعه یافت داشت. بعضی از قسمت‌های آن کاملا گیج‌کننده است و به‌خوبی قابل درک نمی‌باشد.</p>

<h2><a class="h_ident" id="h_RpOj6vyDFv" href="#h_RpOj6vyDFv" tabindex="-1" role="presentation"></a>شبکه‌ها و اینترنت</h2>

<p><a class="p_ident" id="p_JllaLERxSx" href="#p_JllaLERxSx" tabindex="-1" role="presentation"></a>شبکه‌های کامپیوتری از دهه‌ی پنجاه میلادی (1950s) به وجود آمده اند. اگر دو یا چند کامپیوتر را با کابل به هم متصل کنید و اجازه بدهید که داده‌ها بین این کابل‌ها ارسال و دریافت شوند، می‌توانید کارهای شگفت‌انگیزی انجام دهید.</p>

<p><a class="p_ident" id="p_CbwyhoDNHG" href="#p_CbwyhoDNHG" tabindex="-1" role="presentation"></a>و اگر اتصال دو کامپیوتر در یک ساختمان به ما امکان انجام کارهای شگفت‌انگیز را می‌دهد، اتصال کامپیوترها در وسعت سیاره باید نتایج فوق‌العاده‌ای داشته باشد. در دهه‌ی هشتاد میلادی (1980)، فناوری‌ای مورد نیاز برای شروع پیاده‌سازی این هدف توسعه داده شد که نتیجه‌ی آن، شبکه‌ی <em>اینترنت</em> نامیده‌ شد. این فناوری به آنچه وعده داده بود دست‌ یافت.</p>

<p>یک کامپیوتر می‌تواند از این شبکه برای انتقال بیت‌ها به یک کامپیوتر دیگر استفاده کند. برای اینکه این انتقال بیت‌ها باعث تعاملی موثر شود، باید کامپیوتر‌های دو سمت از معنای بیت‌هایی که منتقل می‌شوند آگاه باشند. معنای یک دنباله‌ از بیت‌ها به طور کلی به نوع و مکانیزم رمزگذاری چیزی بستگی دارد که این دنباله قرار است بیان کند.</p>

<p>یک <em>پروتکل شبکه</em> یک سبک تعامل در یک شبکه را توصیف می‌کند. پروتکل‌هایی برای ارسال ایمیل، دریافت ایمیل، به اشتراک گذاری فایل‌ها یا حتی برای کنترل کامپیوترهایی که ممکن است توسط نرم‌افزارهای مخرب آلوده شده باشند وجود دارند.</p>

<p><a class="p_ident" id="p_9Asn1ri5pP" href="#p_9Asn1ri5pP" tabindex="-1" role="presentation"></a>به عنوان مثال، <em>پروتکل انتقال ابرمتن</em> (HTTP)، برای بازیابی منابع مشخص (شامل اطلاعاتی مثل صفحات وب یا تصاویر) استفاده می‌شود. طبق این پروتکل، طرف ارسال‌کننده‌ی درخواست باید درخواستش را با یک خط مانند مثال زیر شروع کند، که شامل نام آن منبع مورد نظر و نسخه‌ای از پروتکل که قرار است استفاده شود می‌باشد:</p>

<pre class="snippet cm-s-default" data-language="text/plain" ><a class="c_ident" id="c_lC/Gwm2hWr" href="#c_lC/Gwm2hWr" tabindex="-1" role="presentation"></a>GET /index.html HTTP/1.1</pre>

<p>قوانین بسیار زیادی وجود دارد که درخواست‌دهنده می‌تواند برای مشخص نمودن جزئیات بیشتر در متن درخواست قرار دهد و نیز طرف دوم، که منبع خواسته شده را بر‌می‌گرداند، می‌تواند در محتوایش جای‌ دهد. در <a href="18_http.html">فصل 18</a> بیشتر به HTTP خواهیم پرداخت.</p>

<p>بیشتر پروتکل‌ها بر پایه‌ی دیگر پروتکل‌ها ساخته می‌شوند. HTTP با شبکه به عنوان وسیله‌ای جریان‌دار برخورد می‌کند که در آن می‌توانید بیت ها را قرار داده و با ترتیبی صحیح به مقصدی صحیح برسانید. همانطور که در <a href="11_async.html">فصل 11</a> دیدیم، کسب اطمینان از این صحت عملکرد، یکی از مسائل نسبتا مشکل است.</p>

<p><a class="p_ident" id="p_/rd8TSYhb5" href="#p_/rd8TSYhb5" tabindex="-1" role="presentation"></a><em>پروتکل کنترل مخابره</em> (TCP) ، پروتکلی است که این مشکل را برطرف می‌کند. تمامی وسایلی که از طریق اینترنت به هم متصل هستند به زبان TCP صحبت می کنند و بیشتر تعاملات روی اینترنت بر پایه‌ی آن ساخته شده است.</p>

<p><a class="p_ident" id="p_2zAnapW+Ev" href="#p_2zAnapW+Ev" tabindex="-1" role="presentation"></a>یک ارتباط TCP به این شکل عمل می‌کند: یک کامپیوتر باید منتظر بماند یا به گوش باشد (<em>listening</em>)، تا دیگر کامپیوترها شروع به صحبت با آن کنند. برای آنکه بتوان به انواع مختلف ارتباطات در آن واحد روی یک دستگاه واحد گوش کرد هر شنونده یک عدد دارد (که <em>پورت</em> نامیده می‌شود) که به آن اختصاص داده شده است. بیشتر پروتکل‌ها مشخص می کنند که کدام پورت به صورت پیش‌فرض باید استفاده شود. به عنوان مثال، زمانی که قصد داریم تا یک ایمیل را با استفاده از پروتکل SMTP ارسال کنیم، انتظار می‌رود ماشینی که از طریق آن ایمیل را ارسال می کنیم، به پورت 25 گوش کند.</p>

<p><a class="p_ident" id="p_VR2AAfnlPM" href="#p_VR2AAfnlPM" tabindex="-1" role="presentation"></a>یک کامپیوتر دیگر می‌تواند با استفاده از شماره‌ی پورت صحیح، به ماشین هدفش ارتباط گرفته و یک اتصال برقرار نماید. اگر ماشین هدف در دسترس باشد و به آن پورت گوش دهد، این اتصال با موفقیت ایجاد می‌شود. کامپیوتر شنونده را سرویس دهنده (<em>server</em>) می‌نامند و کامپیوتری که به آن متصل می‌شود را یک سرویس گیرنده (<em>client</em>) می‌نامند.</p>

<p><a class="p_ident" id="p_9UT7MEyD4j" href="#p_9UT7MEyD4j" tabindex="-1" role="presentation"></a>این گونه ارتباطات مانند یک لوله‌ی دوطرفه عمل می کنند که بیت‌ها می‌توانند در آن جریان داشته باشند – ماشین‌هایی که در هر دو سمت قرار دارند می‌توانند داده‌ها را درون آن قرار دهند. به محض اینکه بیت‌ها با موفقیت منتقل شدند، می‌توان آن ها را توسط ماشینی که در دیگر سمت قرار داد دوباره خواند. این مدل مدلی مناسب است. می توانید فرض کنید که TCP یک تجرید از شبکه فراهم می‌کند.</p>

<h2 id="web"><a class="h_ident" id="h_5uDjZrPVWT" href="#h_5uDjZrPVWT" tabindex="-1" role="presentation"></a>وب</h2>

<p><a class="p_ident" id="p_/Hat2cXYP1" href="#p_/Hat2cXYP1" tabindex="-1" role="presentation"></a>وب جهان‌گستر یا <em>World Wide Web</em> (نباید با اینترنت معادل گرفته شود) مجموعه‌ای از پروتکل‌ها و فرمت‌ها است که به ما این امکان را می‌دهد تا صفحات وب را توسط یک مرورگر مشاهده کنیم. بخش &quot;وب&quot; آن اشاره به این حقیقت دارد که این گونه صفحات می توانند به آسانی با یکدیگر پیوند برقرار سازند و این ارتباطات شبکه‌ای بزرگ را می سازد که کاربران می‌توانند درون آن حرکت کنند.</p>

<p><a class="p_ident" id="p_E1s86NuovT" href="#p_E1s86NuovT" tabindex="-1" role="presentation"></a>برای اینکه بخشی از وب باشید، تمام چیزی که لازم دارید این است که یک ماشین را به اینترنت متصل نمایید و آن ماشین را تنظیم کنید که روی پورت 80 به پروتکل HTTP گوش کند، بنابراین دیگر کامپیوترها می‌توانند از این ماشین برای گرفتن اسناد درخواست دهند.</p>

<p><a class="p_ident" id="p_Di2bB3ekhc" href="#p_Di2bB3ekhc" tabindex="-1" role="presentation"></a>هر سند روی وب به وسیله‌ی یک نشانی وب (URL) نام گذاری می‌شود که چیزی شبیه این خواهد شد:</p>

<pre class="snippet cm-s-default" data-language="null" ><a class="c_ident" id="c_szDcTXPXE8" href="#c_szDcTXPXE8" tabindex="-1" role="presentation"></a>  http://eloquentjavascript.net/13_browser.html
 |      |                      |               |
 protocol       server               path</pre>

<p><a class="p_ident" id="p_f7rbhQCvEz" href="#p_f7rbhQCvEz" tabindex="-1" role="presentation"></a>قسمت اول نشان می‌دهد که این URL از پروتکل HTTP استفاده می‌کند (برخلاف مثلا HTTP رمزگذاری شده که به شکل <bdo>https://</bdo> نوشته می‌شود.). سپس بخشی می آید که سرویس‌دهنده‌ای که سند را از آن درخواست می کنیم در آن مشخص شده است. در آخر یک مسیر رشته‌ای که سند مورد نظر (یا منبع) را مشخص می‌کند.</p>

<p><a class="p_ident" id="p_nERDlgZQap" href="#p_nERDlgZQap" tabindex="-1" role="presentation"></a>دستگاه‌هایی که به اینترنت متصل می‌شوند یک <em>آدرس IP</em> دریافت می کنند که عددی است که می‌توان از آن برای ارسال پیام به آن دستگاه استفاده نمود و ظاهری شبیه به <bdo><code>149.210.142.219</code></bdo> یا <bdo><code>2001:4860:4860::8888</code></bdo> دارد. اما یک لیست عددی کم و بیش تصادفی را به سختی می‌توان به خاطر سپرد و تایپ آن هم دشوار است؛ پس در عوض می‌توان یک نام دامنه برای یک آدرس خاص یا مجموعه‌ای از آدرس‌ها ثبت کرد. من دامنه‌ی <bdo><em>eloquentjavascript.net</em></bdo> را برای اشاره به آدرس IP یک ماشین که توسط خودم مدیریت می شود ثبت کرده ام بنابراین  می‌توانم از آن دامنه برای انتشار صفحات وب استفاده کنم.</p>

<p><a class="p_ident" id="p_uKDOtnVogU" href="#p_uKDOtnVogU" tabindex="-1" role="presentation"></a>اگر URLای که دیدیم را در نوار آدرس مرورگرتان تایپ کنید، مرورگر تلاش می‌کند که آن سندی که در URL مشخص شده است را بازیابی و نمایش دهد. ابتدا، مرورگر شما باید آدرسی که <bdo><em>eloquentjavascript.net</em></bdo> به آن اشاره می‌کند را به‌دست بیاورد. سپس با استفاده از پروتکل HTTP اتصالی با سرویس دهنده در آن آدرس برقرار کرده و آن منبع <bdo><em>/13_browser.html</em></bdo> را درخواست می‌کند. اگر همه چیز به خوبی پیش رفت، سرویس دهنده یک سند را برمی گرداند که مرورگر شما آن را روی صفحه‌ی مانیتور شما نمایش می‌دهد.</p>

<h2><a class="h_ident" id="h_n3OM6EV/KR" href="#h_n3OM6EV/KR" tabindex="-1" role="presentation"></a>HTML</h2>

<p><a class="p_ident" id="p_1I9bSOU+4y" href="#p_1I9bSOU+4y" tabindex="-1" role="presentation"></a>HTML که مخفف <em>زبان نشانه‌گذاری ابرمتن</em> است، یک فرمت سند برای صفحات وب می‌باشد. یک سند HTML حاوی متن و <em>برچسب‌هایی</em> (tags) است که به آن متن ساختار می‌بخشند و چیزهایی مثل مثل پاراگراف‌ها، پیوند‌ها و عنوان‌ها را توصیف می‌کنند، می‌باشد.</p>

<p><a class="p_ident" id="p_n3OM6EV/KR" href="#p_n3OM6EV/KR" tabindex="-1" role="presentation"></a>یک سند کوچک HTML ممکن است شبیه به زیر باشد:</p>

<pre class="snippet cm-s-default" data-language="text/html" ><a class="c_ident" id="c_4GPwlAMrQs" href="#c_4GPwlAMrQs" tabindex="-1" role="presentation"></a><span class="cm-meta">&lt;!doctype html&gt;</span>
<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">html</span><span class="cm-tag cm-bracket">&gt;</span>
  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">head</span><span class="cm-tag cm-bracket">&gt;</span>
    <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">meta</span> <span class="cm-attribute">charset</span>=<span class="cm-string">&quot;utf-8&quot;</span><span class="cm-tag cm-bracket">&gt;</span>
    <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">title</span><span class="cm-tag cm-bracket">&gt;</span>My home page<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">title</span><span class="cm-tag cm-bracket">&gt;</span>
  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">head</span><span class="cm-tag cm-bracket">&gt;</span>
  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">body</span><span class="cm-tag cm-bracket">&gt;</span>
    <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">h1</span><span class="cm-tag cm-bracket">&gt;</span>My home page<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">h1</span><span class="cm-tag cm-bracket">&gt;</span>
    <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">p</span><span class="cm-tag cm-bracket">&gt;</span>Hello, I am Marijn and this is my home page.<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">p</span><span class="cm-tag cm-bracket">&gt;</span>
    <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">p</span><span class="cm-tag cm-bracket">&gt;</span>I also wrote a book! Read it
      <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">a</span> <span class="cm-attribute">href</span>=<span class="cm-string">&quot;http://eloquentjavascript.net&quot;</span><span class="cm-tag cm-bracket">&gt;</span>here<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">a</span><span class="cm-tag cm-bracket">&gt;</span>.<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">p</span><span class="cm-tag cm-bracket">&gt;</span>
  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">body</span><span class="cm-tag cm-bracket">&gt;</span>
<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">html</span><span class="cm-tag cm-bracket">&gt;</span></pre>

<p>برچسب ها که توسط علامت‌های بزرگتر و کوچکتر محصور شده اند (<bdo><code>&lt;</code></bdo> و <bdo><code>&gt;</code></bdo>) اطلاعاتی درباره‌ی ساختار سند فراهم می سازند. دیگر متن‌ها فقط متن ساده محسوب می‌شوند.</p>

<p><a class="p_ident" id="p_P30IdjUYCO" href="#p_P30IdjUYCO" tabindex="-1" role="presentation"></a>سند HTML با <bdo><code>&lt;!doctype html&gt;</code></bdo> آغاز می گردد که به مرورگر می گوید این صفحه را به عنوان یک صفحه‌ی <em>مدرن</em> HTML تفسیر کند؛ برخلاف دیگر حالت‌هایی که پیش‌تر استفاده می شد.</p>

<p><a class="p_ident" id="p_1596bGtzGF" href="#p_1596bGtzGF" tabindex="-1" role="presentation"></a>سندهای HTML دارای بخشی به نام head و بخشی به نام body است. قسمت head حاوی اطلاعاتی درباره‌ی خود سند است و body حاوی خود سند. در این مثال، قسمت head اعلان می کند که عنوان این سند <bdo>“My home page”</bdo> است و این سند از رمزگذاری <bdo>UTF-8</bdo> استفاده می‌کند که روشی برای رمزگذاری متن‌های یونیکد به عنوان داده‌های دودویی است. قسمت body سند دارای یک عنوان ( <bdo><code>&lt;h1&gt;</code></bdo> به معنای &quot;عنوان 1” – <bdo><code>&lt;h2&gt;</code></bdo> تا <bdo><code>&lt;h6&gt;</code></bdo> زیرعنوان کوچکتری را تولید می کنند) و دو پاراگراف می‌باشد (<bdo><code>&lt;p&gt;</code></bdo>).</p>

<p><a class="p_ident" id="p_n9rOwPtLdg" href="#p_n9rOwPtLdg" tabindex="-1" role="presentation"></a>برچسب‌ها به شکل‌های متعددی می آیند. یک عنصر، مثل body ، یک پاراگراف، یا یک پیوند، به وسیله‌ی یک <em>برچسب آغازین</em> مثل <bdo><code>&lt;p&gt;</code></bdo> شروع شده و با یک <em>برچسب پایانی</em> مثل <bdo><code>&lt;/p&gt;</code></bdo> اتمام می یابد. بعضی از برچسب‌های آغازین مثل برچسب مربوط به پیوند <bdo><code>&lt;a&gt;</code></bdo> حاوی اطلاعات بیشتری به شکل جفت‌های نام و مقدار <bdo><code>name=&quot;value&quot;</code></bdo> می‌باشند که <em>خصوصیت</em> (attribute) نامیده می‌شوند. در این مثال، مقصد پیوند توسط <bdo><code>href=&quot;http://<wbr>eloquentjavascript.<wbr>net&quot;</code></bdo> مشخص شده است که <code>href</code> مخفف <bdo>hypertext reference</bdo> (مرجع منبع) می‌باشد.</p>

<p>بعضی از انواع برچسب‌ها چیزی را محصور نمی کنند بنابراین به برچسب پایانی نیازی ندارند. برچسب فراداده <bdo><code>&lt;meta charset=&quot;utf-8&quot;&gt;</code></bdo> مثالی از اینگونه برچسب ها است.</p>

<p><a class="p_ident" id="p_jZYHFHPUYt" href="#p_jZYHFHPUYt" tabindex="-1" role="presentation"></a>برای این که بتوان از علامت‌های بزرگتر و کوچکتر در متن یک سند استفاده کرد، با وجود اینکه این علامت ها در HTML معنای به خصوصی دارند، یک شکل از نشانه‌گذاری ویژه وجود دارد که باید معرفی شود. یک علامت کوچکتر را به وسیله‌ی <bdo><code>&amp;lt;</code></bdo>  و علامت بزرگتر را با <bdo><code>&amp;gt;</code></bdo>  می نویسند. در HTML کاراکتر <code>&amp;</code> اگر با یک کلمه و یک نقطه‌ویرگول (<code>;</code>) دنبال شود یک <em>موجودیت</em> (entity) نامیده می‌شود و توسط کاراکتری معادلش که به رمز درآمده است جایگزین می گردد.</p>

<p>این کار مشابه کاری است که بک‌اسلش در رشته‌های جاوااسکریپت انجام می داد. به دلیل اینکه این مکانیزم، به کاراکترهای <code>&amp;</code> معنای خاصی می‌دهد، برای نوشتن خود امپرسند می‌توان از <bdo><code>&amp;amp;</code></bdo> استفاده کرد. در قسمت مقدار خصوصیت‌ها که توسط نقل‌قول جفتی محصور شده اند، <bdo><code>&amp;quot;</code></bdo> را می‌توان برای وارد کردن کاراکتر واقعی نقل قول استفاده کرد.</p>

<p>HTML به شکلی تفسیر می‌شود که تحمل خطای بالایی دارد. زمانی که برچسب‌هایی که باید جایی موجود بودند نوشته نشده باشند، مرورگر آن ها را بازسازی می‌کند. روش این بازسازی به صورت استاندارد درآمده است. می‌توانید به مرورگرهای مدرن اعتماد کنید که همه به طور یکسان این کار را انجام دهند.</p>

<p>سندی که در ادامه می آید شبیه به سندی تفسیر می‌شود که پیش تر آمد.</p>

<pre class="snippet cm-s-default" data-language="text/html" ><a class="c_ident" id="c_uW331sfiez" href="#c_uW331sfiez" tabindex="-1" role="presentation"></a><span class="cm-meta">&lt;!doctype html&gt;</span>

<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">meta</span> <span class="cm-attribute">charset</span>=<span class="cm-string">utf-8</span><span class="cm-tag cm-bracket">&gt;</span>
<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">title</span><span class="cm-tag cm-bracket">&gt;</span>My home page<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">title</span><span class="cm-tag cm-bracket">&gt;</span>

<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">h1</span><span class="cm-tag cm-bracket">&gt;</span>My home page<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">h1</span><span class="cm-tag cm-bracket">&gt;</span>
<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">p</span><span class="cm-tag cm-bracket">&gt;</span>Hello, I am Marijn and this is my home page.
<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">p</span><span class="cm-tag cm-bracket">&gt;</span>I also wrote a book! Read it
  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">a</span> <span class="cm-attribute">href</span>=<span class="cm-string">http://eloquentjavascript.net</span><span class="cm-tag cm-bracket">&gt;</span>here<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">a</span><span class="cm-tag cm-bracket">&gt;</span>.</pre>

<p><a class="p_ident" id="p_PoTFHw+hqD" href="#p_PoTFHw+hqD" tabindex="-1" role="presentation"></a>برچسب های <bdo><code>&lt;html&gt;</code></bdo>، <bdo><code>&lt;head&gt;</code></bdo> و <bdo><code>&lt;body&gt;</code></bdo> کلا نوشته نشده اند. مرورگر می‌داند که برچسب‌های <bdo><code>&lt;meta&gt;</code></bdo> و <bdo><code>&lt;title&gt;</code></bdo> متعلق به قسمت head می‌باشند و <bdo><code>&lt;h1&gt;</code></bdo> به معنای شروع قسمت body است. علاوه بر آن، در مثال بالا پاراگراف‌ها را با برچسب‌های پایانی نبسته‌ام به این دلیل که یک پاراگراف جدید یا پایان سند این کار را خود به خود به صورت ضمنی انجام می‌دهد. علامت‌های نقل‌قولی که پیرامون مقادیر خصوصیت‌ها بود نیز نیامده است.</p>

<p>در این کتاب معمولا برچسب‌های <bdo><code>&lt;html&gt;</code></bdo>، <bdo><code>&lt;head&gt;</code></bdo> و <bdo><code>&lt;body&gt;</code></bdo> از مثال‌ها حذف می‌شود تا فضای کمتری اشغال شود اما برچسب‌های پایانی را خواهم آورد و همچنین نقل‌قول‌ها را پیرامون خصوصیت‌ها قرار خواهم داد.</p>

<p><a class="p_ident" id="p_bgcn63h33x" href="#p_bgcn63h33x" tabindex="-1" role="presentation"></a>همچنین قسمت اعلان سند (doctype) و <code>charset</code> را معمولا قلم می‌گیرم. این کار را برای تشویق شما برای حذف این قسمت‌ها انجام نمی دهم. مرورگرها معمولا زمانی که فراموش می‌کنید تا این قسمت‌ها را بنویسید، واکنش عجیب غریبی از خود نشان می‌دهند. شما می‌توانید فرض کنید که قسمت doctype و <code>charset</code> به صورت پیش‌فرض و ضمنی در مثال‌ها وجود دارند حتی زمانی که در متن مثال دیده نمی‌شوند.</p>

<h2 id="script_tag"><a class="h_ident" id="h_Un8BFicBLZ" href="#h_Un8BFicBLZ" tabindex="-1" role="presentation"></a>اچ‌تی‌ام‌ال و جاوااسکریپت</h2>

<p>در این کتاب، مهمترین برچسب HTML برچسب <bdo><code>&lt;script&gt;</code></bdo> است. این برچسب به ما امکان افزودن جاوااسکریپت به یک سند را فراهم می‌سازد.</p>

<pre class="snippet cm-s-default" data-language="text/html" ><a class="c_ident" id="c_r/8m2Qh59j" href="#c_r/8m2Qh59j" tabindex="-1" role="presentation"></a><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">h1</span><span class="cm-tag cm-bracket">&gt;</span>Testing alert<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">h1</span><span class="cm-tag cm-bracket">&gt;</span>
<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">script</span><span class="cm-tag cm-bracket">&gt;</span><span class="cm-variable">alert</span>(<span class="cm-string">&quot;hello!&quot;</span>);<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">script</span><span class="cm-tag cm-bracket">&gt;</span></pre>

<p>این اسکریپت به محض اینکه مرورگر به برچسب <bdo><code>&lt;script&gt;</code></bdo> در سند HTML برسد اجرا خواهد شد. وقتی این صفحه باز شود یک پنجره‌ی گفتگو را نشان خواهد داد – تابع <code>alert</code> شبیه به <code>prompt</code> عمل می‌کند با این تفاوت که فقط یک پیام نمایش می‌دهد و امکان دریافت ورودی از کاربر را فراهم نمی‌کند.</p>

<p><a class="p_ident" id="p_a5Tr4tGofl" href="#p_a5Tr4tGofl" tabindex="-1" role="presentation"></a>قراردادن برنامه‌های بزرگ به طور مستقیم در سندهای HTML اغلب کاربردی نیست. برچسب <bdo><code>&lt;script&gt;</code></bdo> می‌تواند خصوصیتی به نام <code>src</code> داشته باشد که به وسیله‌ی آن یک فایل اسکریپت (یک فایل متنی که حاوی یک برنامه جاوااسکریپت است) را از یک URL بارگیری کند.</p>

<pre class="snippet cm-s-default" data-language="text/html" ><a class="c_ident" id="c_UGuRtQ4i0u" href="#c_UGuRtQ4i0u" tabindex="-1" role="presentation"></a><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">h1</span><span class="cm-tag cm-bracket">&gt;</span>Testing alert<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">h1</span><span class="cm-tag cm-bracket">&gt;</span>
<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">script</span> <span class="cm-attribute">src</span>=<span class="cm-string">&quot;code/hello.js&quot;</span><span class="cm-tag cm-bracket">&gt;</span><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">script</span><span class="cm-tag cm-bracket">&gt;</span></pre>

<p><a class="p_ident" id="p_1GthYTIcYg" href="#p_1GthYTIcYg" tabindex="-1" role="presentation"></a>فایل  <bdo><em>code/hello.js</em></bdo> که در اینجا قرار گرفته است حاوی برنامه‌ی مشابهی است – <bdo><code>alert(&quot;hello!&quot;)</code></bdo>. زمانی که یک صفحه‌ی HTML به دیگر URLها به عنوان بخشی از خود ارجاع می‌دهد، به عنوان مثال یک تصویر یا یک اسکریپت – مرورگرهای وب آن منابع را گرفته و در صفحه قرار می‌دهند.</p>

<p><a class="p_ident" id="p_y1NGoIHc9l" href="#p_y1NGoIHc9l" tabindex="-1" role="presentation"></a>یک برچسب script همیشه باید توسط یک <bdo><code>&lt;/script&gt;</code></bdo> بسته شود، حتی زمانی که به فایلی که در آن کدی وجود ندارد ارجاع می‌دهد. اگر فراموش کنید آن را ببندید، بخش‌های دیگر صفحه که زیر آن قرار گرفته به عنوان بخشی از اسکریپت در نظر گرفته می‌شود.</p>

<p><a class="p_ident" id="p_y4LychKhOT" href="#p_y4LychKhOT" tabindex="-1" role="presentation"></a>می‌توانید ماژول‌های ES را در مرورگرها بارگیری کنید ( <a href="10_modules.html#es">فصل 10</a>) و این کار با استفاده از خصوصیت <bdo><code>type=&quot;module&quot;</code></bdo> صورت می‌گیرد. این ماژول ها می‌توانند با استفاده از URLها نسبت به خودشان به عنوان نام ماژول در اعلان <code>import</code> وابسته به دیگر ماژول‌ها باشند.</p>

<p>بعضی خصوصیت‌ها همچنین می‌توانند حاوی یک برنامه‌ی جاوااسکریپت باشند. برچسب <bdo><code>&lt;button&gt;</code></bdo> که در ادامه می آید (که یک دکمه نمایش می‌دهد) خصوصیتی به نام <code>onclick</code> دارد. مقدار این خصوصیت وقتی که این دکمه کلیک می‌شود اجرا می‌شود.</p>

<pre class="snippet cm-s-default" data-language="text/html" ><a class="c_ident" id="c_2a6WfPL3P2" href="#c_2a6WfPL3P2" tabindex="-1" role="presentation"></a><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">button</span> <span class="cm-attribute">onclick</span>=<span class="cm-string">&quot;alert('Boom!');&quot;</span><span class="cm-tag cm-bracket">&gt;</span>DO NOT PRESS<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">button</span><span class="cm-tag cm-bracket">&gt;</span></pre>

<p>توجه داشته باشید که من از علامت‌های نقل قول تکی برای رشته‌ی مربوط به خصوصیت <code>onclick</code> استفاده کرده ام به دلیل اینکه نقل قول جفتی برای خود خصوصیت استفاده شده است. می‌توانستم همچنین از <bdo><code>&amp;quot;</code></bdo> استفاده کنم.</p>

<h2><a class="h_ident" id="h_TdvyLdP6gf" href="#h_TdvyLdP6gf" tabindex="-1" role="presentation"></a>محیط اجرایی محدود یا جعبه‌‌ی شن  (sandbox)</h2>

<p>اجرای برنامه‌هایی که از اینترنت دانلود می‌شوند به صورت بالقوه با خطر همراه است. شما اطلاعات زیادی درباره‌ی افرادی که مسئول بیشتر سایت‌هایی که بازدید می‌کنید ندارید و این لزوما چیز خوبی نیست. اجرای برنامه‌های افراد ناشناس باعث می‌شود که کامپیوتر شما آلوده‌ی ویروس شود، اطلاعات شما دزیده شوند و حساب‌های شما هک شوند.</p>

<p>البته که جذابیت وب به همین است که می‌توانید در آن بگردید بدون اینکه لزوما نیاز باشد از پیش به هر صفحه‌ای که سر می‌زنید اعتماد داشته باشید . به همین دلیل است که مرورگرها کارهایی که برنامه‌های جاوااسکریپت می‌توانند انجام دهند را به شدت محدود می کنند: جاوااسکریپت نمی‌تواند به فایل‌های کامپیوتر شما دسترسی داشته باشد یا چیزی که مرتبط با صفحه‌ای که در آن قرار گرفته نیست را تغییر دهد.</p>

<p>ایزوله کردن یک محیط برنامه‌نویسی به این روش را مدل جعبه‌ی شنی می‌نامند، ایده‌ای که در آن برنامه در محیطی امن و بی گزند می‌تواند در یک محیط حفاظت‌شده اجرا شود. می توانید این نوع خاص از جعبه‌ی شن را درون یک قفس با میله‌های حفاظتی ضخیم تصور کنید که برنامه‌هایی که درون آن اجرا می‌شوند نمی‌توانند خارج از آن تاثیری داشته باشند.</p>

<p>قسمت سخت ایجاد جعبه‌ی شن برای برنامه‌ها این است که باید برای برنامه فضای کافی و مفید فراهم کنید در عین حال محدودیت هم در نظر بگیرید که از خطرات جلوگیری شود. خیلی از قابلیت‌ها، مثل امکان ارتباط با دیگر سرویس دهنده‌ها یا خواندن محتوای موجود در حافظه‌ی کلیپ‌بورد در کپی و الصاق، می‌تواند مشکلاتی مربوط به نقض حریم خصوصی به وجود آورد.</p>

<p>هرازگاهی کسی پیدا می‌شود که راهی برای دور زدن محدودیت‌های مرورگر پیدا می‌کند و کاری مخرب انجام می‌دهد ، از درز اطلاعات جزئی خصوصی تا ایجاد ارتباط با کامپیوتری که مرورگر روی آن قرار گرفته است. توسعه دهندگان مرورگرها رخنه‌ی پیدا شده را برطرف می کنند و دوباره همه چیز به خوبی کار می‌کند- تا زمانی که مشکل بعدی شناسایی شود و با این امید که این رخنه عمومی‌شود به جای اینکه مخفیانه توسط واحد‌های حکومتی یا گروه‌های خاصی مورد سوءاستفاده قرار گیرد.</p>

<h2><a class="h_ident" id="h_OyGmme1OmS" href="#h_OyGmme1OmS" tabindex="-1" role="presentation"></a>سازگاری و جنگ‌های مرورگر</h2>

<p>در مراحل ابتدایی گسترش وب، مرورگری به نام موزاییک حاکم بر بازار مرورگرها بود. بعد از چند سال، نت اسکیپ بیشترین سهم را به دست آورد که بعد از آن در اختیار اینترنت اکسپلورر مایکروسافت قرار گرفت. در هر برهه‌ای که یک مرورگر غالب بود، ارائه دهنده‌ی آن مرورگر احساس می کرد که مجوز آن را دارد که شخصا قابلیت‌های جدیدی برای وب اختراع کند. چون بیشتر کاربران از یک مرورگر استفاده می کردند، وب‌سایت‌ها هم به سراغ استفاده از آن قابلیت‌ها می رفتند – و مرورگرهای دیگر را در نظر نمی گرفتند.</p>

<p><a class="p_ident" id="p_h+yEb+yj1e" href="#p_h+yEb+yj1e" tabindex="-1" role="presentation"></a>این بخش تاریک ماجرای سازگاری مرورگرها است که اغلب به جنگ‌های مرورگر (browser wars) مشهور است. توسعه دهندگان وب نه تنها وبی یکپارچه را تجربه نکردند بلکه با دو یا سه پلتفرم ناسازگار روبرو شدند. ماجرا آنجا بدتر شد که مرورگرهایی که حدود سال 2003 استفاده می شدند پر از باگ و خطاهای گوناگون بودند که هر کدام برای هر مرورگر متفاوت بودند. کسانی که صفحات وب را در آن زمان تولید می کردند مشکلات فراوانی داشتند.</p>

<p><a class="p_ident" id="p_RysHufzywk" href="#p_RysHufzywk" tabindex="-1" role="presentation"></a>موزیلا فایرفاکس، شاخه‌ای غیرانتفاعی از نت اسکیپ، موقعیت اینترنت اکسپلورر را در اواخر دهه‌ی اول قرن 21 به چالش کشید. به دلیل اینکه مایکروسافت به طور خاص علاقمند به ماندن در رقابت مرورگرها در آن زمان نبود ، فایرفاکس سهم زیادی از بازار مرورگرها را از چنگ مایکروسافت ربود. حوالی همان زمان، گوگل مرورگر کروم را معرفی کرد و سافاری شرکت اپل هم به محبوبیت رسید، که شرایطی را به وجود آورد که چهار بازیگر اصلی به جای یک بازیگر در میدان وجود داشتند.</p>

<p><a class="p_ident" id="p_oPLGmhjq6p" href="#p_oPLGmhjq6p" tabindex="-1" role="presentation"></a>بازیگران جدید دید جدی‌تری نسبت به رعایت استانداردها داشتند و از روش‌های مهندسی بهتری استفاده می کردند که باعث شد با باگ و ناسازگاری کمتری روبرو شویم. مایکروسافت که می دید در حال از دست دادن سهم بازارش است، به میدان آمد و این دید جدید را در مرورگر edge پیاده سازی کرد که جایگزین اینترنت اکسپلورر شد. اگر این روز ها در حال شروع یادگیری توسعه وب هستید ، خودتان را خوش شانس بدانید. آخرین نسخه‌های مرورگرهای اصلی تقریبا یکپارچه عمل می کنند و نسبتا باگ‌های خیلی کمی دارند.</p><nav><a href="12_language.html" title="previous chapter">◀</a> <a href="index.html" title="cover">◆</a> <a href="14_dom.html" title="next chapter">▶</a></nav>
</article>
